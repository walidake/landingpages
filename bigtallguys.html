<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigTallGuys - Clothing for Big & Tall Men</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        (function(){
            emailjs.init("WQreiyObbOb4eQMDd"); // 替换为您的EmailJS用户ID
        })();
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #232323;
            color: #f5f5f5;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        .hero {
            height: 400px;
            background: linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)), url('https://images.unsplash.com/photo-1441984904996-e0b6ba687e04?ixlib=rb-1.2.1&auto=format&fit=crop&w=1500&q=80');
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero p {
            font-size: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.7);
        }

        /* Features Section */
        .features {
            margin-bottom: 50px;
        }

        .feature-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background-color: #333;
            color: white;
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            border: none;
            border-bottom: 1px solid #444;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .feature-btn:hover {
            background-color: #444;
        }

        .feature-btn i {
            margin-right: 10px;
        }

        .feature-content {
            display: none;
            padding: 30px;
            background-color: #2a2a2a;
            border-radius: 0 0 5px 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .active-content {
            display: block;
        }

        /* Hot Sales Products */
        .products {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 25px;
            margin-bottom: 30px;
        }

        .product {
            background: #333;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s;
        }

        .product:hover {
            transform: translateY(-5px);
        }

        .product-img {
            height: 200px;
            background-size: cover;
            background-position: center;
        }

        .product-info {
            padding: 15px;
        }

        .product-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            color: #f5f5f5;
        }

        .product-price {
            color: #FF6B00;
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .btn {
            display: inline-block;
            padding: 10px 20px;
            background-color: #FF6B00;
            color: white;
            text-decoration: none;
            border-radius: 4px;
            text-align: center;
            font-weight: bold;
            transition: background-color 0.3s;
            border: none;
            cursor: pointer;
        }

        .btn:hover {
            background-color: #e65c00;
        }

        .store-btn {
            display: block;
            margin: 30px auto 0;
            max-width: 300px;
            text-align: center;
        }

        /* Survey Form */
        .survey-form {
            background: #2a2a2a;
            padding: 25px;
            border-radius: 8px;
            max-width: 600px;
            margin: 0 auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #f5f5f5;
        }

        .form-tip {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 15px;
            display: block;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #444;
            border-radius: 4px;
            font-size: 1rem;
            background-color: #333;
            color: #f5f5f5;
        }

        textarea {
            min-height: 100px;
            resize: vertical;
        }

        .upload-box {
            border: 2px dashed #444;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            margin-top: 10px;
            background-color: #333;
            transition: all 0.3s;
        }

        .upload-box:hover {
            border-color: #FF6B00;
        }

        .upload-box i {
            font-size: 2rem;
            color: #777;
            margin-bottom: 10px;
        }

        .gift-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin: 15px 0;
        }

        .gift-option {
            flex: 1 1 calc(50% - 15px);
            position: relative;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 8px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .gift-option:hover, .gift-option.selected {
            border-color: #FF6B00;
        }

        .gift-img {
            height: 100px;
            background-size: cover;
            background-position: center;
        }

        .gift-name {
            padding: 10px;
            text-align: center;
            font-size: 0.9rem;
            background: rgba(0, 0, 0, 0.3);
            color: #f5f5f5;
        }

        .selected-check {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #27ae60;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .submit-btn {
            background: #FF6B00;
            color: white;
            border: none;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            padding: 15px;
            margin-top: 20px;
            transition: background 0.3s;
            width: 100%;
        }

        .submit-btn:hover {
            background: #e65c00;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            overflow-y: auto;
        }

        .modal-content {
            background: #2a2a2a;
            margin: 50px auto;
            padding: 30px;
            border-radius: 8px;
            max-width: 600px;
            position: relative;
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            font-size: 1.5rem;
            cursor: pointer;
            color: #aaa;
        }

        /* Contact Methods */
        .contact-methods {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 20px;
        }

        .contact-card {
            flex: 1 1 300px;
            background: #333;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 3px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s;
        }

        .contact-card:hover {
            transform: translateY(-5px);
        }

        .contact-card i {
            font-size: 2.5rem;
            color: #FF6B00;
            margin-bottom: 15px;
        }

        .contact-card h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
            color: #f5f5f5;
        }

        .contact-card p {
            margin-bottom: 20px;
            color: #aaa;
        }

        /* VIP Section */
        .vip-benefits {
            background: linear-gradient(135deg, #333, #222);
            color: white;
            padding: 30px;
            border-radius: 8px;
            max-width: 800px;
            margin: 0 auto;
        }

        .vip-benefit {
            color: #f1dc14;
            margin: 0 1.2rem 0 0;
        }

        .benefit-list {
            margin: 20px 0;
            list-style-type: none;
        }

        .benefit-list li {
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }

        .benefit-list i {
            margin-right: 15px;
            font-size: 1.2rem;
            color: #FF6B00;
        }

        /* Commission Section */
        .commission-content {
            max-width: 700px;
            margin: 0 auto;
            text-align: center;
        }

        .commission-steps {
            display: flex;
            margin: 40px 0;
            gap: 20px;
        }

        .step {
            flex: 1;
            background: #333;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
        }

        .step-number {
            display: block;
            width: 40px;
            height: 40px;
            background: #FF6B00;
            color: white;
            border-radius: 50%;
            line-height: 40px;
            text-align: center;
            margin: 0 auto 20px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        /* Footer */
        .footer {
            background: #1a1a1a;
            color: white;
            padding: 50px 0 20px;
            margin-top: 50px;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 40px;
        }

        .footer-section {
            flex: 1 1 300px;
        }

        .footer-section h3 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            color: #FF6B00;
        }

        .footer-section h3:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background: #FF6B00;
        }

        .contact-info {
            list-style: none;
        }

        .contact-info li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            color: #aaa;
        }

        .contact-info i {
            margin-right: 10px;
            width: 20px;
            color: #FF6B00;
        }

        /* Responsive Styles */
        @media (max-width: 900px) {
            .products {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .commission-steps {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .hero {
                height: 300px;
            }
            
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .hero p {
                font-size: 1.2rem;
            }
            
            .gift-option {
                flex: 1 1 100%;
            }
        }

        @media (max-width: 480px) {
            .products {
                grid-template-columns: 1fr;
            }
            
            .hero h1 {
                font-size: 2rem;
            }
            
            .hero p {
                font-size: 1.2rem;
            }
        }

        /* Notification Styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #27ae60;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            opacity: 0;
            transform: translateY(-20px);
            transition: all 0.4s;
            max-width: 90%;
        }

        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }

        .notification.error {
            background: #e74c3c;
        }
        
        .image-preview {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }
        
        .preview-item {
            position: relative;
            width: 100px;
            height: 100px;
            border-radius: 6px;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }
        
        .preview-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .remove-btn {
            position: absolute;
            top: 5px;
            right: 5px;
            background: rgba(0,0,0,0.6);
            color: white;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            cursor: pointer;
        }
        
        /* EmailJS specific styles */
        .emailjs-indicator {
            display: none;
            text-align: center;
            margin-top: 15px;
            color: #aaa;
            font-size: 0.9rem;
        }
        
        .file-size {
            position: absolute;
            bottom: 5px;
            left: 5px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            padding: 2px 5px;
            border-radius: 4px;
            font-size: 0.7rem;
        }
        
        .size-warning {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .compression-indicator {
            display: none;
            text-align: center;
            margin-top: 15px;
            color: #aaa;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1>BIGTALLGUYS</h1>
            <p>Stylish clothing designed specifically for big and tall men</p>
            <a href="https://bigtallguys.com" class="btn store-btn">Shop Now</a>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features">
        <div class="container">
            <!-- Hot Sales -->
            <button class="feature-btn" onclick="toggleFeature('hot-sales')">
                <i class="fas fa-fire"></i> Hot Sales
            </button>
            <div id="hot-sales" class="feature-content">
                <div class="products">
                    <div class="product">
                        <div class="product-img" style="background-image: url('https://bigtallguys.com/cdn/shop/files/T2-5D2E-022.png');"></div>
                        <div class="product-info">
                            <div class="product-title">Graphic Tee Shirts</div>
                            <div class="product-price">$2?.99</div>
                            <a href="https://bigtallguys.com/collections/shop-by-graphic" class="btn">View Details</a>
                        </div>
                    </div>
                    <div class="product">
                        <div class="product-img" style="background-image: url('https://bigtallguys.com/cdn/shop/files/5eqg.jpg');"></div>
                        <div class="product-info">
                            <div class="product-title">Words Tee Shirts</div>
                            <div class="product-price">$2?.99</div>
                            <a href="https://bigtallguys.com/collections/shop-by-text" class="btn">View Details</a>
                        </div>
                    </div>
                    <div class="product">
                        <div class="product-img" style="background-image: url('https://bigtallguys.com/cdn/shop/files/STFF00009-1_c48ff417-505e-497d-a29d-221ebb7bcb21.jpg');"></div>
                        <div class="product-info">
                            <div class="product-title">Feature Collection - Fat</div>
                            <div class="product-price">$2?.99</div>
                            <a href="https://bigtallguys.com/collections/big-men" class="btn">View Details</a>
                        </div>
                    </div>
                    <div class="product">
                        <div class="product-img" style="background-image: url('https://bigtallguys.com/cdn/shop/files/T0-5D2F-018.jpg');"></div>
                        <div class="product-info">
                            <div class="product-title">Feature Collection - Bigfoot</div>
                            <div class="product-price">$2?.99</div>
                            <a href="https://bigtallguys.com/collections/bigfoot" class="btn">View Details</a>
                        </div>
                    </div>
                </div>
                <a href="https://bigtallguys.com" class="btn store-btn">Visit Our Store</a>
            </div>

            <!-- Free Gifts -->
            <button class="feature-btn" onclick="toggleFeature('free-gifts')">
                <i class="fas fa-gift"></i> Free Gifts
            </button>
            <div id="free-gifts" class="feature-content">
                <div class="survey-intro">
                    <p>We are collecting feedback to improve our products and your shopping experience. Complete this short survey and receive a free gift!</p>
                    <button class="btn" style="margin: 20px auto; display: block;" onclick="openModal('survey-modal')">Take Survey for Free Gift</button>
                </div>
                
                <!-- Survey Modal -->
                <div id="survey-modal" class="modal">
                    <div class="modal-content">
                        <span class="close-modal" onclick="closeModal('survey-modal')">&times;</span>
                        <h2 style="text-align: center; margin-bottom: 25px; color: #FF6B00;">Free Gift Survey</h2>
                        <form class="survey-form" onsubmit="submitSurvey(event)" id="emailjs-form">
                            <div class="form-group">
                                <label>Where To Buy</label>
                                <span class="form-tip">Please tell us the place you placed the order from us</span>
                                <select id="where-buy" required>
                                    <option value="Amazon">Amazon</option>
                                    <option value="Walmart">Walmart</option>
                                    <option value="BigTallGuys.com">BigTallGuys.com</option>
                                    <option value="Others">Others</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label>Order Number</label>
                                <span class="form-tip">Make sure you bought the item from us, please tell us the order number</span>
                                <input type="text" id="order-number" required placeholder="E.g. BTG20230730XXXX">
                            </div>
                            
                            <div class="form-group">
                                <label>Rating</label>
                                <span class="form-tip">Tell us your real experience</span>
                                <select id="rating" required onchange="toggleRatingFields()">
                                    <option value="4-5">4-5 Stars</option>
                                    <option value="1-3">1-3 Stars</option>
                                </select>
                            </div>
                            
                            <!-- Positive Review Section -->
                            <div id="positive-review" style="display: none;">
                                <button type="button" class="btn" style="width: 100%; margin-bottom: 15px;" onclick="writeReview()">
                                    <i class="fas fa-pencil-alt"></i> Write a Review
                                </button>
                                
                                <div class="form-group">
                                    <label>Upload Screenshot</label>
                                    <span class="form-tip">Write a review for other buyers. Send the screenshot to us, and you will get the free gift faster!</span>
                                    <div class="upload-box" onclick="document.getElementById('file-input').click()">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        <p>Click or drag images here to upload</p>
                                        <p>PNG, JPG up to 5MB</p>
                                        <input type="file" id="file-input" multiple accept="image/*" style="display: none;" onchange="handleFileSelect(event)">
                                    </div>
                                    <div class="image-preview" id="image-preview"></div>
                                </div>
                            </div>
                            
                            <!-- Negative Review Section -->
                            <div id="negative-review" style="display: none;">
                                <div class="form-group">
                                    <label>Tell us why you don't like the product</label>
                                    <span class="form-tip">Let us hear your voice, and you will get the free gift faster</span>
                                    <textarea id="feedback-text" placeholder="Please share your experience and how we can improve..."></textarea>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Free Gift You Chose</label>
                                <span class="form-tip">Tell us the free gift you pick</span>
                                <div class="gift-options">
                                    <div class="gift-option" data-gift="baseball-cap" onclick="selectGift(this, 'baseball-cap')">
                                        <div class="gift-img" style="background-image: url('https://t3.ftcdn.net/jpg/15/30/43/56/360_F_1530435646_mZJ5orVeGpVasUa5F6qVLUjCmc4AXOle.jpg');"></div>
                                        <div class="gift-name">Premium Baseball Cap</div>
                                    </div>
                                    <div class="gift-option" data-gift="t-shirt" onclick="selectGift(this, 't-shirt')">
                                        <div class="gift-img" style="background-image: url('https://img.kwcdn.com/product/open/2024-04-19/1713516996317-188832cc982f4aa5909d67d0b520ae18-goods.jpeg');"></div>
                                        <div class="gift-name">Trendy T-Shirt</div>
                                    </div>
                                    <div class="gift-option" data-gift="wallet" onclick="selectGift(this, 'wallet')">
                                        <div class="gift-img" style="background-image: url('https://miro.medium.com/v2/resize:fit:1400/1*i24ihnAIPWfiE_6PX5zCAg.jpeg');"></div>
                                        <div class="gift-name">Fashion Wallet</div>
                                    </div>
                                    <div class="gift-option" data-gift="socks" onclick="selectGift(this, 'socks')">
                                        <div class="gift-img" style="background-image: url('https://cdn.shopify.com/s/files/1/0116/1462/t/36/assets/eaa8ef26d5ff--Blokes-socks-800px.jpg');"></div>
                                        <div class="gift-name">Comfort Socks</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Your Email</label>
                                <span class="form-tip">Make sure your email is correct. After confirming, we will get in touch with you</span>
                                <input type="email" id="email" required placeholder="name@example.com">
                            </div>
                            
                            <div class="emailjs-indicator" id="emailjs-indicator">
                                <i class="fas fa-sync fa-spin"></i> Sending form data...
                            </div>
                            
                            <div class="compression-indicator" id="compression-indicator"></div>
                            
                            <button type="submit" class="submit-btn">Submit Survey</button>
                        </form>
                    </div>
                </div>
                
                <!-- Congrats Modal -->
                <div id="congrats-modal" class="modal">
                    <div class="modal-content" style="text-align: center; padding: 50px 30px;">
                        <span class="close-modal" onclick="closeModal('congrats-modal')">&times;</span>
                        <i class="fas fa-check-circle" style="font-size: 4rem; color: #27ae60; margin: 20px 0;"></i>
                        <h2 style="color: #FF6B00;">Congratulations!</h2>
                        <p style="font-size: 1.2rem; margin: 20px 0; color: #ddd;">Your information has been received successfully.</p>
                        <p style="font-size: 1.2rem; margin-bottom: 30px; color: #ddd;">The free gift will be sent within 24 hours after your information is validated.</p>
                        <button class="btn" onclick="closeModal('congrats-modal')">Close</button>
                    </div>
                </div>
            </div>

            <!-- Customer Service -->
            <button class="feature-btn" onclick="toggleFeature('customer-service')">
                <i class="fas fa-headset"></i> Customer Service
            </button>
            <div id="customer-service" class="feature-content">
                <p style="text-align: center; margin-bottom: 30px; font-size: 1.1rem; color: #ddd;">We're here to help! Contact us using one of these methods:</p>
                
                <div class="contact-methods">
                    <div class="contact-card">
                        <i class="fas fa-envelope"></i>
                        <h3>Email</h3>
                        <p>Send us an email with your questions or concerns</p>
                        <a class="btn" href="mailto:service@bigtallguys.com">Email Us</a>
                    </div>
                    
                    <div class="contact-card">
                        <i class="fab fa-facebook"></i>
                        <h3>Facebook</h3>
                        <p>Message us on Facebook for quick assistance</p>
                        <a class="btn" href="http://m.me/bigtallguys">Message on Facebook</a>
                    </div>
                    
                    <div class="contact-card">
                        <i class="fas fa-globe"></i>
                        <h3>Live Chat</h3>
                        <p>Visit our website and chat with us</p>
                        <a class="btn" href="https://bigtallguys.com/?show_chat">Chat With Us</a>
                    </div>
                </div>
            </div>
            
            <!-- VIP Section -->
            <button style="display: none" class="feature-btn" onclick="toggleFeature('vip')">
                <i class="fas fa-crown"></i> Be Our VIP Customer
            </button>
            <div style="display: none" id="vip" class="feature-content">
                <div class="vip-benefits">
                    <h2 style="text-align: center; margin-bottom: 30px; color: #FF6B00;">Become a VIP Member Today</h2>
                    <p>As Our VIP member, you'll enjoy exclusive benefits and perks:</p>
                    
                    <ul class="benefit-list">
                        <li><i class="fas fa-check"></i> <strong class="vip-benefit">Monthly Free T-Shirt:</strong> Receive a free premium t-shirt every month</li>
                        <li><i class="fas fa-check"></i> <strong class="vip-benefit">Discount Codes:</strong> Get three 20% discount codes every month</li>
                        <li><i class="fas fa-check"></i> <strong class="vip-benefit">Free Shipping:</strong> One monthly free shipping discount code</li>
                        <li><i class="fas fa-check"></i> <strong class="vip-benefit">Early Access:</strong> Be the first to know about new arrivals</li>
                    </ul>
                    
                    <a class="btn" style="display: block; margin: 30px auto 0;" href="http://whop.com/big-tall-guys">Join VIP Program</a>
                </div>
            </div>


            <!-- Earn Commission -->
            <button style="display: none" class="feature-btn" onclick="toggleFeature('commission')">
                <i class="fas fa-money-bill-wave"></i> Earn Commission
            </button>
            <div style="display: none" id="commission" class="feature-content">
                <div class="commission-content">
                    <h2 style="color: #FF6B00;">Earn Commissions as a BigTallGuys Affiliate</h2>
                    <p>Join our affiliate program and earn competitive commissions for every sale you generate. It's free to join and easy to get started!</p>
                    
                    <div class="commission-steps">
                        <div class="step">
                            <span class="step-number">1</span>
                            <h3>Sign Up</h3>
                            <p>Register for our affiliate program in less than 5 minutes.</p>
                        </div>
                        <div class="step">
                            <span class="step-number">2</span>
                            <h3>Promote</h3>
                            <p>Share your unique affiliate links with your audience.</p>
                        </div>
                        <div class="step">
                            <span class="step-number">3</span>
                            <h3>Earn</h3>
                            <p>Get 10% commission on every sale you generate.</p>
                        </div>
                    </div>
                    
                    <a href="#" class="btn">Learn More & Apply</a>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Us</h3>
                    <p>BigTallGuys is dedicated to providing fashionable and comfortable clothing for big and tall men. We believe that every man deserves to feel confident and look his best.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul class="contact-info">
                        <li><i class="fas fa-envelope"></i> service@bigtallguys.com</li>
                        <li><i class="fas fa-phone"></i> (805) 751-3822</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Fashion Ave, Los Angeles, CA</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h3>Stay Connected</h3>
                    <p>Subscribe to our newsletter for the latest offers and updates</p>
                    <form>
                        <input type="email" placeholder="Your Email" style="padding: 10px; width: 100%; margin-bottom: 10px; border: none; border-radius: 4px; background: #333; color: #f5f5f5;">
                        <button class="btn" onclick="showNotification('Thanks for your subscribing.')">Subscribe</button>
                    </form>
                </div>
            </div>
            
            <p style="text-align: center; margin-top: 50px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1); color: #aaa;">
                &copy; 2025 BigTallGuys. All rights reserved.
            </p>
        </div>
    </footer>

    <!-- Notification Element -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-message"></span>
    </div>

    <script>
        // 全局变量
        let selectedFiles = [];
        let selectedGift = null;
        const MAX_FILE_SIZE_KB = 30; // 最大文件大小50KB
        const MAX_IMAGE_WIDTH = 800; // 最大宽度
        const MAX_IMAGE_HEIGHT = 600; // 最大高度
        const COMPRESSION_QUALITY = 0.5; // 压缩质量
        
        // 页面加载完成后执行
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化UI状态
            document.getElementById('free-gifts').classList.add('active-content');
        });
        
        // Toggle feature sections
        function toggleFeature(id) {
            // Close all other feature contents
            document.querySelectorAll('.feature-content').forEach(function(content) {
                content.classList.remove('active-content');
            });
            
            // Open the selected feature
            document.getElementById(id).classList.add('active-content');
        }
        
        // Modal functions
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'block';
            document.body.style.overflow = 'hidden';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
            document.body.style.overflow = 'auto';
        }
        
        // Form field toggling based on rating
        function toggleRatingFields() {
            const rating = document.getElementById('rating').value;
            const positiveReview = document.getElementById('positive-review');
            const negativeReview = document.getElementById('negative-review');
            
            if (rating === '4-5') {
                positiveReview.style.display = 'block';
                negativeReview.style.display = 'none';
            } else if (rating === '1-3') {
                positiveReview.style.display = 'none';
                negativeReview.style.display = 'block';
            } else {
                positiveReview.style.display = 'none';
                negativeReview.style.display = 'none';
            }
        }
        
        // Gift selection function
        function selectGift(element, giftType) {
            // Remove selected class from all options
            document.querySelectorAll('.gift-option').forEach(function(gift) {
                gift.classList.remove('selected');
                if (gift.querySelector('.selected-check')) {
                    gift.querySelector('.selected-check').remove();
                }
            });
            
            // Add selected class to the clicked option
            element.classList.add('selected');
            selectedGift = giftType;
            
            // Add checkmark
            const checkMark = document.createElement('div');
            checkMark.className = 'selected-check';
            checkMark.innerHTML = '✓';
            element.appendChild(checkMark);
        }
        
        // Write review function
        function writeReview() {
            const whereBuy = document.getElementById('where-buy').value;
            let reviewLink;
            
            // Generate the appropriate review link
            switch (whereBuy) {
                case 'Amazon':
                    reviewLink = 'https://www.amazon.com/review/create-review';
                    break;
                case 'Walmart':
                    reviewLink = 'https://www.walmart.com/reviews/write-a-review';
                    break;
                case 'BigTallGuys.com':
                    reviewLink = 'https://www.bigtallguys.com/reviews';
                    break;
                default:
                    reviewLink = 'https://www.bigtallguys.com/reviews';
            }
            
            // Open review page
            window.open(reviewLink, '_blank');
        }
        
        // 处理文件选择
        async function handleFileSelect(event) {
            const files = event.target.files;
            const previewContainer = document.getElementById('image-preview');
            const compressionIndicator = document.getElementById('compression-indicator');
            
            if (files.length > 0) {
                // 显示压缩指示器
                compressionIndicator.style.display = 'block';
                compressionIndicator.innerHTML = '<i class="fas fa-sync fa-spin"></i> Compressing images...';
                
                // 重置预览区域
                previewContainer.style.display = 'flex';
                previewContainer.innerHTML = '';
                
                // 重置selectedFiles
                selectedFiles = [];
                
                try {
                    // 逐个处理文件
                    for (let i = 0; i < files.length; i++) {
                        const file = files[i];
                        
                        // 检查文件类型
                        if (!file.type.match('image.*')) {
                            showNotification('Please select image files only (PNG, JPG, JPEG)', 'error');
                            continue;
                        }
                        
                        // 压缩图片
                        const compressedFile = await compressImage(file);
                        
                        if (compressedFile) {
                            // 添加到选择的文件列表
                            selectedFiles.push(compressedFile);
                            
                            // 创建预览
                            createPreviewItem(compressedFile, previewContainer);
                        }
                    }
                } catch (error) {
                    console.error('Image compression failed:', error);
                    showNotification('Image compression failed: ' + error.message, 'error');
                } finally {
                    // 隐藏压缩指示器
                    compressionIndicator.style.display = 'none';
                }
            } else {
                previewContainer.style.display = 'none';
                previewContainer.innerHTML = '';
            }
        }
        
        // 创建预览项
        function createPreviewItem(file, container) {
            const reader = new FileReader();
            
            reader.onload = function(event) {
                const previewItem = document.createElement('div');
                previewItem.className = 'preview-item';
                
                const img = document.createElement('img');
                img.src = event.target.result;
                
                // 文件大小显示
                const fileSize = document.createElement('div');
                fileSize.className = 'file-size';
                const sizeKB = (file.size / 1024).toFixed(2);
                fileSize.textContent = `${sizeKB} KB`;
                if (sizeKB > MAX_FILE_SIZE_KB) {
                    fileSize.classList.add('size-warning');
                }
                
                const removeBtn = document.createElement('div');
                removeBtn.className = 'remove-btn';
                removeBtn.innerHTML = '<i class="fas fa-times"></i>';
                removeBtn.addEventListener('click', function() {
                    previewItem.remove();
                    selectedFiles = selectedFiles.filter(f => f !== file);
                    
                    if (selectedFiles.length === 0) {
                        container.style.display = 'none';
                    }
                });
                
                previewItem.appendChild(img);
                previewItem.appendChild(fileSize);
                previewItem.appendChild(removeBtn);
                container.appendChild(previewItem);
            };
            
            reader.readAsDataURL(file);
        }
        
        // 图片压缩函数
        function compressImage(file) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    img.src = e.target.result;
                };
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // 计算新尺寸，保持宽高比
                    let width = img.width;
                    let height = img.height;
                    
                    if (width > MAX_IMAGE_WIDTH) {
                        height = (MAX_IMAGE_WIDTH / width) * height;
                        width = MAX_IMAGE_WIDTH;
                    }
                    
                    if (height > MAX_IMAGE_HEIGHT) {
                        width = (MAX_IMAGE_HEIGHT / height) * width;
                        height = MAX_IMAGE_HEIGHT;
                    }
                    
                    // 设置canvas尺寸
                    canvas.width = width;
                    canvas.height = height;
                    
                    // 绘制图片到canvas
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // 压缩图片
                    canvas.toBlob(function(blob) {
                        if (!blob) {
                            reject(new Error('Image compression failed'));
                            return;
                        }
                        
                        // 检查文件大小
                        const sizeKB = blob.size / 1024;
                        
                        // 如果文件仍然太大，尝试降低质量
                        if (sizeKB > MAX_FILE_SIZE_KB) {
                            // 递归压缩直到满足要求
                            compressWithQuality(file, COMPRESSION_QUALITY - 0.1)
                                .then(resolve)
                                .catch(reject);
                        } else {
                            // 创建压缩后的文件对象
                            const compressedFile = new File([blob], file.name, {
                                type: 'image/jpeg',
                                lastModified: Date.now()
                            });
                            resolve(compressedFile);
                        }
                    }, 'image/jpeg', COMPRESSION_QUALITY);
                };
                
                img.onerror = function() {
                    reject(new Error('Failed to load image'));
                };
                
                reader.readAsDataURL(file);
            });
        }
        
        // 带质量参数的压缩函数
        function compressWithQuality(file, quality) {
            return new Promise((resolve, reject) => {
                if (quality < 0.3) {
                    reject(new Error('Cannot compress to required size'));
                    return;
                }
                
                const img = new Image();
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    img.src = e.target.result;
                };
                
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    
                    // 计算新尺寸
                    let width = img.width;
                    let height = img.height;
                    
                    if (width > MAX_IMAGE_WIDTH) {
                        height = (MAX_IMAGE_WIDTH / width) * height;
                        width = MAX_IMAGE_WIDTH;
                    }
                    
                    if (height > MAX_IMAGE_HEIGHT) {
                        width = (MAX_IMAGE_HEIGHT / height) * width;
                        height = MAX_IMAGE_HEIGHT;
                    }
                    
                    canvas.width = width;
                    canvas.height = height;
                    ctx.drawImage(img, 0, 0, width, height);
                    
                    // 使用指定质量压缩
                    canvas.toBlob(function(blob) {
                        if (!blob) {
                            reject(new Error('Image compression failed'));
                            return;
                        }
                        
                        const sizeKB = blob.size / 1024;
                        
                        if (sizeKB > MAX_FILE_SIZE_KB) {
                            // 继续降低质量
                            compressWithQuality(file, quality - 0.1)
                                .then(resolve)
                                .catch(reject);
                        } else {
                            const compressedFile = new File([blob], file.name, {
                                type: 'image/jpeg',
                                lastModified: Date.now()
                            });
                            resolve(compressedFile);
                        }
                    }, 'image/jpeg', quality);
                };
                
                img.onerror = function() {
                    reject(new Error('Failed to load image'));
                };
                
                reader.readAsDataURL(file);
            });
        }
        
        // 表单提交处理函数
        async function submitSurvey(event) {
            event.preventDefault();
            
            // 验证表单
            if (!validateForm()) {
                return;
            }
            
            // 获取表单数据
            const formData = collectFormData();
            
            // 显示发送指示器
            const indicator = document.getElementById('emailjs-indicator');
            indicator.style.display = 'block';
            indicator.innerHTML = '<i class="fas fa-sync fa-spin"></i> Sending form data...';
            
            try {
                // 准备附件
                const attachments = [];
                if (selectedFiles.length > 0) {
                    // 最多发送前3张图片
                    const maxImages = Math.min(selectedFiles.length, 3);
                    for (let i = 0; i < maxImages; i++) {
                        const base64 = await getBase64(selectedFiles[i]);
                        attachments.push({
                            filename: `feedback-image-${i+1}.jpg`,
                            content: base64.split(',')[1],
                            type: 'image/jpeg'
                        });
                    }
                }
                
                console.log("attachments: "+ attachments);
                // 使用EmailJS发送数据
                await sendEmailNotification(formData, attachments);
                
                // 成功后显示成功消息
                closeModal('survey-modal');
                openModal('congrats-modal');
            } catch (error) {
                // 出错时显示错误消息
                console.error('Form submission failed:', error);
                showNotification('Form submission failed: ' + error.message, 'error');
            } finally {
                // 隐藏指示器
                indicator.style.display = 'none';
            }
        }
        
        function validateForm() {
            const email = document.getElementById('email').value;
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            
            if (!emailPattern.test(email)) {
                showNotification('Please enter a valid email address', 'error');
                return false;
            }
            
            if (!selectedGift) {
                showNotification('Please select a free gift', 'error');
                return false;
            }
            
            const rating = document.getElementById('rating').value;
            if (rating === '4-5' && selectedFiles.length === 0) {
                showNotification('Please upload at least one screenshot', 'error');
                return false;
            }
            
            if (rating === '1-3' && !document.getElementById('feedback-text').value) {
                showNotification('Please share your feedback', 'error');
                return false;
            }
            
            return true;
        }
        
        function collectFormData() {
            const rating = document.getElementById('rating').value;
            
            return {
                whereBuy: document.getElementById('where-buy').value,
                orderNumber: document.getElementById('order-number').value,
                rating: rating,
                feedback: rating === '1-3' ? document.getElementById('feedback-text').value : null,
                gift: selectedGift,
                email: document.getElementById('email').value
            };
        }
        
        // 使用EmailJS发送通知
        async function sendEmailNotification(formData, attachments) {
            try {
                // 准备要发送的数据
                const submissionData = {
                    submittedAt: new Date().toLocaleString(),
                    whereBuy: formData.whereBuy,
                    orderNumber: formData.orderNumber,
                    rating: formData.rating,
                    gift: formData.gift,
                    email: formData.email,
                    feedback: formData.feedback,
                    images: []
                };
                
                // 获取图片Base64数据
                if (selectedFiles.length > 0) {
                    // 最多发送前3张图片
                    const maxImages = Math.min(selectedFiles.length, 3);
                    for (let i = 0; i < maxImages; i++) {
                        const base64 = await getBase64(selectedFiles[i]);
                        submissionData.images.push(base64);
                    }
                }
                
                // 转换为JSON字符串
                const jsonData = JSON.stringify(submissionData, null, 2);
                
                // 发送邮件
                const response = await emailjs.send(
                    'walidake',        // 替换为您的EmailJS服务ID
                    'template_59b8xe9',       // 替换为您的EmailJS模板ID
                    {
                        subject: '[Free Gifts] Order Number: ' + formData.orderNumber + ', Platform: ' + formData.whereBuy,
                        message: jsonData
                    }
                );
                
                if (response.status !== 200) {
                    throw new Error('EmailJS returned status: ' + response.text);
                }
                
                return true;
            } catch (error) {
                console.error('Error sending email:', error);
                throw new Error('Failed to send email: ' + error.message);
            }
        }
        
        // 获取Base64编码
        function getBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result);
                reader.onerror = error => reject(error);
            });
        }
        
        function showNotification(message, type = 'success') {
            const notification = document.getElementById('notification');
            const messageSpan = document.getElementById('notification-message');
            
            messageSpan.textContent = message;
            notification.className = 'notification ' + (type === 'error' ? 'error' : '');
            notification.classList.add('show');
            
            // 3秒后隐藏通知
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }
        
        // Close modal when clicking outside modal content
        window.onclick = function(event) {
            document.querySelectorAll('.modal').forEach(function(modal) {
                if (event.target === modal) {
                    closeModal(modal.id);
                }
            });
        }
    </script>
</body>
</html>
